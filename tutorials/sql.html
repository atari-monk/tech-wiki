<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="author" content="atari-monk" />
        <meta name="description" content="Tutorial page of my tech wiki." />
        <title>Tech Wiki Web Page</title>
        <link rel="icon" href="../images/html5.png" type="image/x-icon" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" />
        <script src="../js/tutorial.js"></script>
    </head>

    <body>
        <header>
            <h1 class="title">SQL quiz.</h1>
            <nav aria-label="primary-navigation">
                <ul>
                    <li class="list-point">
                        <a href="#source">Source</a>
                    </li class="list-point">
                    <li class="list-point">
                        <a href="#desc">Description</a>
                    </li class="list-point">
                    <li class="list-point">
                        <a href="#prerequisites">Prerequisites/Assumptions</a>
                    </li class="list-point">
                    <li class="list-point">
                        <a href="#tutorial">Tutorial</a>
                    </li class="list-point">
                    <li class="list-point">
                        <a href="#summary">Summary</a>
                    </li>
                </ul>
            </nav>
        </header>
        <hr />
        <main>
            <article id="source">
                <h2>Source</h2>
                <section class="list-point">
                    <ol>
                        <li class="list-point">
                            <a href="https://github.com/atari-monk/sql/tree/main/Task1">Repo with sqls</a>
                        </li>
                    </ol>
                </section>
            </article>
            <article id="desc">
                <h2>Description</h2>
                <section>
                    <p>
                        This checks some basic sql knowlege.
                    </p>
                </section>
            </article>
            <article id="prerequisites">
                <h2>Prerequisites/Assumptions</h2>
                <section>
                    <ol>
                        <li>
                            <br>
                            <img src="../images/sql/Schema.png" alt="Db Schema" title="Db Schema" width="800" height="222">
                        </li>
                        <li class="list-point">
                            <br>
                            <table>
                                <caption>Person Table</caption>
                                <thead>
                                    <tr>
                                        <th>&nbsp;Id</th>
                                        <th scope="col">Name</th>
                                        <th scope="col">Surname</th>
                                        <th scope="col">IdNumber</th>
                                        <th scope="col">DateOfBirth</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope='row'>1</th>
                                        <td>Patrycja</td>
                                        <td>Gajewska</td>
                                        <td>71012082685</td>
                                        <td>1971-01-20</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>2</th>
                                        <td>Nikola</td>
                                        <td>Urbańska</td>
                                        <td>66012437184</td>
                                        <td>1966-01-24</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>3</th>
                                        <td>Urszula</td>
                                        <td>Borkowska</td>
                                        <td>66100259847</td>
                                        <td>1966-10-02</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>4</th>
                                        <td>Antonina</td>
                                        <td>Mazurek</td>
                                        <td>82092198845</td>
                                        <td>1982-09-21</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>5</th>
                                        <td>Marzanna</td>
                                        <td>Jaworska</td>
                                        <td>56063089324</td>
                                        <td>1956-06-30</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>6</th>
                                        <td>Magdalena</td>
                                        <td>Chmielewska</td>
                                        <td>82060863689</td>
                                        <td>1982-06-08</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>7</th>
                                        <td>Ilona</td>
                                        <td>Stępień</td>
                                        <td>89012121145</td>
                                        <td>1989-01-21</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>8</th>
                                        <td>Elena</td>
                                        <td>Jaworska</td>
                                        <td>71080153645</td>
                                        <td>1971-08-01</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>9</th>
                                        <td>Malwina</td>
                                        <td>Górska</td>
                                        <td>78110217946</td>
                                        <td>1978-11-02</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>10</th>
                                        <td>Marlena</td>
                                        <td>Piotrowska</td>
                                        <td>02310546267</td>
                                        <td>2002-11-05</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>11</th>
                                        <td>Jarosław</td>
                                        <td>Sobczak</td>
                                        <td>52032846639</td>
                                        <td>1952-03-28</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>12</th>
                                        <td>Jerzy</td>
                                        <td>Wróblewski</td>
                                        <td>92110238475</td>
                                        <td>1992-11-02</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>13</th>
                                        <td>Michał</td>
                                        <td>Borkowski</td>
                                        <td>04310329493</td>
                                        <td>2004-11-03</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>14</th>
                                        <td>Milan</td>
                                        <td>Andrzejewski</td>
                                        <td>56121249839</td>
                                        <td>1956-12-12</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>15</th>
                                        <td>Olgierd</td>
                                        <td>Kaźmierczak</td>
                                        <td>68071176437</td>
                                        <td>1968-07-11</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>16</th>
                                        <td>Cyprian</td>
                                        <td>Piotrowski</td>
                                        <td>04242577757</td>
                                        <td>2004-04-25</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>17</th>
                                        <td>Alex</td>
                                        <td>Sikora</td>
                                        <td>05240447453</td>
                                        <td>2005-04-04</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>18</th>
                                        <td>Robert</td>
                                        <td>Kołodziej</td>
                                        <td>89092556213</td>
                                        <td>1989-09-25</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>19</th>
                                        <td>Filip</td>
                                        <td>Zalewski</td>
                                        <td>70020529951</td>
                                        <td>1970-02-05</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>20</th>
                                        <td>Maciej</td>
                                        <td>Ostrowski</td>
                                        <td>79100431434</td>
                                        <td>1979-10-04</td>
                                        </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="5">This is example. Data are not real</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </li>
                        <li class="list-point">
                            <br>
                            <table>
                                <caption>Address Table</caption>
                                <thead>
                                    <tr>
                                        <th>&nbsp;Id</th>
                                        <th scope="col">AddressTypeId</th>
                                        <th scope="col">PersonId</th>
                                        <th scope="col">Street</th>
                                        <th scope="col">Number</th>
                                        <th scope="col">City</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope='row'>1</th>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>Wojska Polskiego</td>
                                        <td>7</td>
                                        <td>Łódź</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>2</th>
                                        <td>2</td>
                                        <td>1</td>
                                        <td>Tadeusza Kościuszki</td>
                                        <td>2</td>
                                        <td>Łódź</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>3</th>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>Adama Mickiewicza</td>
                                        <td>1/5</td>
                                        <td>Kraków</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>4</th>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>Dworcowa</td>
                                        <td>14a</td>
                                        <td>Bydgoszcz</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>5</th>
                                        <td>2</td>
                                        <td>3</td>
                                        <td>1 Maja</td>
                                        <td>3</td>
                                        <td>Wrocław</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>6</th>
                                        <td>2</td>
                                        <td>5</td>
                                        <td>Armii Krajowej</td>
                                        <td>8/1</td>
                                        <td>Wrocław</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>7</th>
                                        <td>3</td>
                                        <td>5</td>
                                        <td>Szkolna</td>
                                        <td>25</td>
                                        <td>Toruń</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>8</th>
                                        <td>1</td>
                                        <td>6</td>
                                        <td>Henryka Sienkiewicza</td>
                                        <td>3</td>
                                        <td>Kraków</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>9</th>
                                        <td>2</td>
                                        <td>6</td>
                                        <td>Rynek</td>
                                        <td>8</td>
                                        <td>Kraków</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>10</th>
                                        <td>3</td>
                                        <td>6</td>
                                        <td>Grunwaldzka</td>
                                        <td>12a/5</td>
                                        <td>Poznań</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>11</th>
                                        <td>1</td>
                                        <td>8</td>
                                        <td>Wolności</td>
                                        <td>4/3</td>
                                        <td>Gdańsk</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>12</th>
                                        <td>2</td>
                                        <td>9</td>
                                        <td>Kolejowa</td>
                                        <td>5</td>
                                        <td>Szczecin</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>13</th>
                                        <td>3</td>
                                        <td>10</td>
                                        <td>Polna</td>
                                        <td>1</td>
                                        <td>Bydgoszcz</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>14</th>
                                        <td>3</td>
                                        <td>11</td>
                                        <td>Ogrodowa</td>
                                        <td>11</td>
                                        <td>Gdańsk</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>15</th>
                                        <td>2</td>
                                        <td>12</td>
                                        <td>Warszawska</td>
                                        <td>34</td>
                                        <td>Poznań</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>16</th>
                                        <td>3</td>
                                        <td>13</td>
                                        <td>Poznańska</td>
                                        <td>13</td>
                                        <td>Szczecin</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>17</th>
                                        <td>3</td>
                                        <td>13</td>
                                        <td>Kościuszki</td>
                                        <td>7c</td>
                                        <td>Kraków</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>18</th>
                                        <td>1</td>
                                        <td>15</td>
                                        <td>3 Maja</td>
                                        <td>45</td>
                                        <td>Wrocław</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>19</th>
                                        <td>1</td>
                                        <td>16</td>
                                        <td>Juliusza Słowackiego</td>
                                        <td>27/7</td>
                                        <td>Elbląg</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>20</th>
                                        <td>1</td>
                                        <td>16</td>
                                        <td>Długa</td>
                                        <td>10</td>
                                        <td>Bydgoszcz</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>21</th>
                                        <td>2</td>
                                        <td>17</td>
                                        <td>Lipowa</td>
                                        <td>3</td>
                                        <td>Piła</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>22</th>
                                        <td>1</td>
                                        <td>17</td>
                                        <td>Leśna</td>
                                        <td>8</td>
                                        <td>Kalisz</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>23</th>
                                        <td>3</td>
                                        <td>18</td>
                                        <td>Niepodległości</td>
                                        <td>4</td>
                                        <td>Łódź</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>24</th>
                                        <td>2</td>
                                        <td>18</td>
                                        <td>11 Listopada</td>
                                        <td>11</td>
                                        <td>Poznań</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>25</th>
                                        <td>1</td>
                                        <td>19</td>
                                        <td>Kościelna</td>
                                        <td>1</td>
                                        <td>Piła</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>26</th>
                                        <td>2</td>
                                        <td>19</td>
                                        <td>Jana Pawła II</td>
                                        <td>5/5</td>
                                        <td>Wrocław</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>27</th>
                                        <td>1</td>
                                        <td>20</td>
                                        <td>Mikołaja Kopernika</td>
                                        <td>30</td>
                                        <td>Bydgoszcz</td>
                                        </tr>
                                        <tr>
                                        <th scope='row'>28</th>
                                        <td>3</td>
                                        <td>20</td>
                                        <td>Główna</td>
                                        <td>6</td>
                                        <td>Gdańsk</td>
                                        </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="5">This is example. Data are not real</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </li>
                        <li class="list-point">
                            <br>
                            <table>
                                <caption>Address Type Table</caption>
                                <thead>
                                    <tr>
                                        <th>&nbsp;Id</th>
                                        <th scope="col">Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                    <th scope='row'>1</th>
                                    <td>Zameldowania</td>
                                    </tr>
                                    <tr>
                                    <th scope='row'>2</th>
                                    <td>Zamieszkania</td>
                                    </tr>
                                    <tr>
                                    <th scope='row'>3</th>
                                    <td>Korespondencyjny</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                    </tr>
                                </tfoot>
                            </table>
                        </li>
                    </ol>
                </section>
            </article>
            <article id="tutorial">
                <h2>Tutorial</h2>
                <section>
                    <ol>
                        <li>
                            <p>
                                Created database named SqlTest. Backup to .bak file.
                            </p>
                            <p>
                                <button onclick="Copy('code1')">Copy</button>
                                <code id='code1'>
                                    <a href='https://github.com/atari-monk/sql/blob/main/Task1/Create.sql'>Create db tables</a>
                                </code>
                                <br>
                                <button onclick="Copy('code2')">Copy</button>
                                <code id='code2'>
                                    <a href='https://github.com/atari-monk/sql/blob/main/Task1/Insert.sql'>Insert data to db tables</a>
                                </code>
                                <br>
                            </p>
                        </li>
                        <li>
                            <p>
                                Write queries:
                            </p>
                            <p>
                            </p>
                        </li>
                        <li>
                            <p>
                                Persons who have no address.
                            </p>
                            <p>
                                <button onclick="Copy('code3')">Copy</button>
                                <code id='code3'>
                                    SELECT p.[Id],p.[Name],p.[Surname],p.[IdNumber],p.[DateOfBirth]<br>FROM [dbo].[Person] p<br>LEFT JOIN [dbo].[Address] a<br>ON p.Id = a.PersonId<br>WHERE a.Id IS NULL;
                                </code>
                                <br>
                            </p>
                        </li>
                        <li>
                            <p>
                                Unique name of person who are born during july, august.
                            </p>
                            <p>
                                <button onclick="Copy('code4')">Copy</button>
                                <code id='code4'>
                                    SELECT DISTINCT n, m FROM <br>(SELECT [Name] as n, MONTH([DateOfBirth]) as m<br>FROM [dbo].[Person])<br>AS data WHERE m IN ('7','8')
                                </code>
                                <br>
                            </p>
                        </li>
                        <li>
                            <p>
                                Show one record with addres type witch is used the most and count of it used.
                            </p>
                            <p>
                                <button onclick="Copy('code5')">Copy</button>
                                <code id='code5'>
                                    select Top(1)<br>at.Name,<br>count(*) as c<br>FROM Address a<br>INNER JOIN AddressType at<br>ON a.AddressTypeId = at.Id<br>GROUP BY at.Name<br>ORDER BY c DESC;
                                </code>
                                <br>
                            </p>
                        </li>
                        <li>
                            <p>
                                Persons with adresses of more that one type.
                            </p>
                            <p>
                                <button onclick="Copy('code6')">Copy</button>
                                <code id='code6'>
                                    select * FROM (<br>select<br>p.Name as Person<br>, at.Name as AddressType<br>, count(*) as c <br>FROM Address a<br>INNER JOIN AddressType at<br>ON a.AddressTypeId = at.Id<br>INNER JOIN Person p<br>ON a.PersonId = p.Id<br>GROUP BY p.Name, at.Name) selectA<br>WHERE c>1<br>ORDER BY selectA.c DESC;
                                </code>
                                <br>
                            </p>
                        </li>
                        <li>
                            <p>
                                Average age of woman. (Truns out if digit before last one in IdNumber is even it's a woman)
                            </p>
                            <p>
                                <button onclick="Copy('code7')">Copy</button>
                                <code id='code7'>
                                    SELECT AVG(age) FROM<br>(<br>SELECT Name<br>, Surname<br>, FLOOR(DATEDIFF(DAY, DateOfBirth, GETDATE()) / 365.25) AS age<br>, IdNumber<br>, SUBSTRING(IdNumber, 10, 1) AS Sex<br>FROM Person<br>) setectA<br>WHERE Sex % 2 = 0;
                                </code>
                                <br>
                            </p>
                        </li>                                                
                    </ol>
                </section>
            </article>
            <article id="summary">
                <h2>Summary</h2>
                <summary>
                    I had no problem in doing that,<br>
                    but it took 2 days with notes and all.<br>
                    20 min was given for this part.<br>
                </summary>
            </article>
        </main>
        <hr />
        <footer>
            <p>
                &lt;&lt;&lt;
                <a href="https://github.com/atari-monk">atari-monk</a>
                &gt;&gt;&gt;
            </p>
            <p>
                <a href="#">Back to Top</a>
            </p>
        </footer>
    </body>
</html>
